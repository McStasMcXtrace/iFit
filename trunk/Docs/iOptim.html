<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
  <title>iFit: optimization methods (iOptim)</title>
</head>
<body>
<h1 style="text-align: center;"><a class="mozTocH1"
 name="mozTocId294096"></a>iFit: iOptim Optimization methods</h1>
<br>
<ol id="mozToc">
<!--mozToc h3 1 h4 2 h3 3 h4 4 h5 5 h6 6-->
  <li><a href="#mozTocId819006">Description of the optimization process
and
general syntax</a></li>
  <li><a href="#mozTocId839813">Recommended optimizers</a>
    <ol>
      <li><a href="#mozTocId65177">In short:</a></li>
    </ol>
  </li>
  <li><a href="#mozTocId610281">List of optimizer
implemented in iFit/iOptim</a></li>
  <li><a href="#mozTocId882538">Benchmarking Optimization methods</a>
    <ol>
      <li><a href="#mozTocId69972">Swarm and Genetic
algorithms</a></li>
      <li><a href="#mozTocId409995">Gradient methods
(Newton)</a></li>
      <li><a href="#mozTocId184231">Other optimizers (and
simplex) </a></li>
    </ol>
  </li>
  <li><a href="#mozTocId95530">Model parameter constraints</a>
    <ol>
      <li><a href="#mozTocId267246">Fixed parameters</a></li>
      <li><a href="#mozTocId871054">Parameters varying
within limits</a></li>
      <li><a href="#mozTocId673530">Limiting parameter
change </a></li>
    </ol>
  </li>
</ol>
<br>
<hr style="width: 100%; height: 2px;">
<div style="text-align: center;">Commands we use in this page: <span
 style="font-style: italic;">fminsearch, </span>and many others<br>
<div style="text-align: left;"><br>
<h3 style="text-align: center;"><a class="mozTocH3"
 name="mozTocId819006"></a>Description of the optimization process and
general syntax</h3>
<br>
The <span style="font-style: italic;">iOptim</span> sub-library
provides a set of <span style="font-weight: bold;">minimization</span>
routines, that is computational methods which attempt to minimize an <span
 style="font-style: italic;">objective</span> function, often referred
as the <span style="font-style: italic;">criteria, </span>by varying
a set of parameters.<br>
<br>
<div style="text-align: center;"><span
 style="font-style: italic; font-weight: bold;">minimizer: </span><span
 style="font-weight: bold;"></span>{ vary vector <span
 style="font-style: italic;">p</span> so that <span
 style="font-style: italic;">objective(p)</span> is minimal }<br>
</div>
<br>
The syntax which all of these optimizers use is the one from the
default Matlab <span style="font-style: italic;">fminsearch</span>
function :<br>
</div>
</div>
<pre style="margin-left: 40px;">&gt;&gt; [parameters,criteria,message,<span
 style="color: rgb(255, 0, 0);">output</span>] = <span
 style="color: rgb(51, 102, 255);">minimizer</span>(objective, guess, <span
 style="color: rgb(255, 0, 0);">options</span>)</pre>
where the <span style="font-style: italic; font-weight: bold;">input</span>
arguments are:<br>
<ol>
  <li><span style="font-style: italic;">objective: </span>the name of
the function to minimize, <span style="font-style: italic;">objective(p)</span>.
This
can
be
a
string
or
a function handle.<span style="font-style: italic;"><br>
    </span></li>
  <li><span style="font-style: italic;">guess: </span>the starting
parameter set that objective depend on (this is a vector of numerical
values).<br>
  </li>
  <li><span style="font-style: italic;">options: </span>a
configuration structure as obtained from <span
 style="font-style: italic;">optimset</span></li>
</ol>
The objective function should use the vector of parameters in order to
compute a value (the criteria) to minimize. This value is usually a
positive scalar that should tend towards zero. When the objective
returns a vector, the sum of its elements is used as criteria, except
for the Levenberg-Marquardt for which it is used as is.<br>
<br>
The <span style="color: rgb(255, 0, 0);">options</span> structure may
contain the following members:<br>
<ul>
  <li><span style="font-style: italic;">options.Display: </span>Level
of display [ <span style="color: rgb(204, 51, 204);">off</span> | <span
 style="color: rgb(204, 51, 204);">iter</span> | <span
 style="color: rgb(204, 51, 204);">notify</span> | <span
 style="color: rgb(204, 51, 204);">final</span> ]. Default is<span
 style="color: rgb(204, 51, 204);"> 'off'</span><br>
  </li>
  <li><span style="font-style: italic;">options.</span><span
 style="font-style: italic;">MaxFunEvals: </span>Maximum number of
function evaluations allowed, sometimes refered as the 'cost' or
'budget'.<br>
  </li>
  <li><span style="font-style: italic;">options.</span><span
 style="font-style: italic;">MaxIter: </span>Maximum number of
iterations allowed<br>
  </li>
  <li><span style="font-style: italic;">options.</span><span
 style="font-style: italic;">TolFun: </span>Termination tolerance on
the function value (absolute value or change)<br>
  </li>
  <li><span style="font-style: italic;">options.</span><span
 style="font-style: italic;">TolX: </span>Termination tolerance on
parameter change<br>
  </li>
  <li><span style="font-style: italic;">options.</span><span
 style="font-style: italic;">OutputFcn: </span>Name of an output
function. When set, it is called at each iteration step. You may use<span
 style="color: rgb(204, 51, 204);"> 'fminplot', </span>which is
provided in <span style="font-style: italic;">iOptim.</span><br>
  </li>
  <li><span style="font-style: italic;">options.</span><span
 style="font-style: italic;">FunValCheck: </span>Check for invalid
values, such as NaN or complex</li>
</ul>
The results from the minimizer are as follow:<br>
<ol>
  <li><span style="font-style: italic;">parameters: </span>is the
parameter set which minimizes the objective function<br>
  </li>
  <li><span style="font-style: italic;">criteria: </span>is the
criteria/objective value at the minimum solution</li>
  <li><span style="font-style: italic;">message: </span>is the final
optimization routine state</li>
  <li><span style="font-style: italic; color: rgb(0, 0, 0);">output: </span>is
a
structure
that
holds
some
information
gathered
during the minimization procedure (see
below)<br>
  </li>
</ol>
The last <span style="color: rgb(255, 0, 0);">output</span> argument
has at least the following fields:<br>
<ul>
  <li><span style="font-style: italic;">output.algorithm: </span>Algorithm
used
(char)</li>
  <li><span style="font-style: italic;">output.message: </span>Message
which details the final state of the optimizer (char)<br>
  </li>
  <li><span style="font-style: italic;">output.</span><span
 style="font-style: italic;">funcCount: </span>Number of
function evaluations performed during the minimization (double)</li>
  <li><span style="font-style: italic;">output.</span><span
 style="font-style: italic;">iterations: </span>Number of
iterations performed during the minimization (double)</li>
</ul>
In <span style="font-style: italic;">all</span> cases, the optimizer
can handle <a href="#mozTocId95530"><span
 style="font-style: italic; font-weight: bold;">constraints,
</span></a>specified
as
a
4th input argument. These are often lower and upper bounds. Refer
to the documentation of each minimizer for more information, and the
documentation about <a href="Fit.html#mozTocId919221">fitting</a>
models onto data
sets.<br>
<br>
<h3><a class="mozTocH4" name="mozTocId839813"></a>Recommended optimizers</h3>
<div style="text-align: center;"><span
 style="text-decoration: underline;"><a href="images/best.png"><img
 alt="Best optimizers" title="Best optimizers" src="images/best.png"
 style="border: 0px solid ; width: 560px; height: 420px;"></a></span><br>
<span style="font-style: italic;">Figure 1: Best optimizers as a
function of the
number of free parameters. The overall success ratio, as well as the
mean execution time is shown.</span><br>
<br>
</div>
The <span style="font-style: italic;">Table 1</span> below presents a
selection of the 'best' optimization methods. For each of them, we
indicate the typical success ratio, and solving time.<span
 style="font-style: italic; font-weight: bold;"><br>
<br>
</span>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td
 style="vertical-align: top; font-weight: bold; font-style: italic; color: rgb(51, 102, 255); background-color: rgb(255, 204, 204);">Optimizer<br>
      </td>
      <td
 style="vertical-align: top; background-color: rgb(255, 204, 204);"><span
 style="font-style: italic; font-weight: bold; color: rgb(51, 102, 255);">Description</span><br>
      </td>
      <td
 style="vertical-align: top; font-weight: bold; font-style: italic; color: rgb(51, 102, 255); background-color: rgb(255, 204, 204);">Mean
Success
rate
(%)<br>
      </td>
      <td
 style="vertical-align: top; font-weight: bold; font-style: italic; color: rgb(51, 102, 255); background-color: rgb(255, 204, 204);">Mean
execution
time
(s)<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span
 style="font-style: italic; font-weight: bold;">fminimfil</span></td>
      <td style="vertical-align: top;">Unconstrained Implicit filtering<br>
      </td>
      <td style="vertical-align: top; color: rgb(51, 204, 0);">77.5</td>
      <td style="vertical-align: top;">8.2</td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span
 style="font-style: italic; font-weight: bold;">fminralg</span></td>
      <td style="vertical-align: top;">Shor R-algorithm</td>
      <td style="vertical-align: top;">61.1</td>
      <td style="vertical-align: top; color: rgb(51, 204, 0);">5.5</td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span
 style="font-style: italic; font-weight: bold;">fminhooke</span></td>
      <td style="vertical-align: top;">Hooke-Jeeves direct search</td>
      <td style="vertical-align: top; color: rgb(51, 204, 0);">75.5</td>
      <td style="vertical-align: top; color: rgb(0, 0, 0);">6.7</td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span
 style="font-weight: bold; font-style: italic;">fmincmaes</span></td>
      <td style="vertical-align: top;">Evolution Strategy with
Covariance Matrix Adaptation</td>
      <td style="vertical-align: top; color: rgb(51, 204, 0);">71.8<br>
      </td>
      <td style="vertical-align: top; color: rgb(0, 0, 0);">12.9</td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span style="font-style: italic;">fminsimpsa</span></td>
      <td style="vertical-align: top;">simplex/simulated
annealing</td>
      <td style="vertical-align: top;">64.7<br>
      </td>
      <td style="vertical-align: top; color: rgb(255, 0, 0);">30.7</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">fminsce<br>
      </td>
      <td style="vertical-align: top;">shuffled complex evolution<br>
      </td>
      <td style="vertical-align: top;">57.1<br>
      </td>
      <td style="vertical-align: top; color: rgb(255, 0, 0);">35.2<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">fminpowell<br>
      </td>
      <td style="vertical-align: top;">Powell with Coggins line search<br>
      </td>
      <td style="vertical-align: top;">59.4<br>
      </td>
      <td style="vertical-align: top;"><span
 style="color: rgb(51, 204, 0);">0.7</span><br>
      </td>
    </tr>
  </tbody>
</table>
<div style="text-align: center;"><span style="font-style: italic;">Table
1:
A
selection
among
the
most
efficient and fast optimization methods</span><span
 style="font-style: italic; font-weight: bold;"></span><span
 style="font-style: italic;">.</span><br>
<span style="font-style: italic; font-weight: bold;"></span></div>
<span style="font-weight: bold;"><br>
</span>All of these optimizers follow the same syntax, just as the
default
Matlab <span style="font-style: italic;">fminsearch</span> optimizer
(which is based upon the simplex method).<span
 style="font-weight: bold;"></span><span
 style="font-style: italic; font-weight: bold;"><br>
</span>
<pre style="margin-left: 40px;">&gt;&gt; [parameters, fval, exitval, output] = <span
 style="color: rgb(51, 102, 255);">fminimfil</span>(function, starting_parameters, options, {constraints})</pre>
where the <span style="font-style: italic;">options</span> and <span
 style="font-style: italic;">output </span>arguments are structures.
All of these methods support constraints on parameters during the
optimization process.<br>
<br>
The iData <a href="Fit.html"><span
 style="font-style: italic; font-weight: bold;">fits</span></a>
method is a wrapper to any of the <span style="font-style: italic;">iOptim</span>
optimizers, with a specified fit criteria.<br>
<h4><a class="mozTocH4" name="mozTocId65177"></a>In short:</h4>
<ul>
  <li><span style="font-style: italic; color: rgb(51, 204, 0);">The
fastest
methods</span> are the Shor R-algoritm(<span style="font-weight: bold;">fminralg</span>,
does
not work
for one parameter) and the
Powell method with local Coggins line search<span
 style="font-weight: bold;"> (fminpowell).</span></li>
  <li><span style="color: rgb(51, 204, 0);">The most efficient methods</span>
are the Implicit filtering<span style="font-weight: bold;"> (fminimfil)
    </span>and the Hooke method <span style="font-weight: bold;">(fminhooke).

    </span>The Evolution Strategy with
Covariance Matrix Adaptation<span style="font-weight: bold;">
(fmincmaes) </span>is also a good choice.</li>
  <li><span style="color: rgb(51, 204, 0);">For low dimensionalities</span>
(up to 4-6 parameters to optimize), the shuffled complex evolution <span
 style="font-weight: bold;">(fminsce) </span>provides a very good
efficiency, but at the cost of a long execution time.</li>
</ul>
<h3><a class="mozTocH4" name="mozTocId610281"></a>List of optimizer
implemented in iFit/iOptim</h3>
We have performed extended tests of all the optimizers that are given
in the iOptim sub-library. For each optimizer, we have minimized a set
of functions, which include sharp, broad, noisy, with local minima,
etc... models.<br>
<ul>
  <li>Each of the 52 model functions to minimize can be solved with up
to <span style="font-style: italic;">d</span>=64 parameters.</li>
  <li>Each of the 17 optimizers has solved all the function, with <span
 style="font-style: italic;">d</span>=1-64 parameters.</li>
  <li>Each of these tests has been repeated 5-10 times with a random
set of starting parameters.</li>
</ul>
This makes about 80000 optimizations... We then present a list of
these optimizers, with their mean solving efficiency and execution
time. This provides a quantitative measurement of optimizers, which
help in choosing good methods, and put aside bad ones. More detailed
results are shown in the plot above.<br>
<p style="margin-bottom: 0cm;"><br>
</p>
<table style="width: 100%;" border="1" cellpadding="1" cellspacing="1">
  <col width="113"> <col width="291"> <col width="97"> <col
 width="104"> <col width="230"> <tbody>
    <tr>
      <td bgcolor="#ffcccc" width="113">
      <p align="CENTER"><font color="#3366ff"><i><b>Name</b></i></font></p>
      </td>
      <td bgcolor="#ffcccc" width="291">
      <p align="CENTER"><font color="#3366ff"><i><b>Description</b></i></font></p>
      </td>
      <td bgcolor="#ffcccc" width="97">
      <p align="CENTER"><font color="#3366ff"><i><b>Overall efficiency
[%]</b></i></font></p>
      </td>
      <td style="width: 104px; background-color: rgb(255, 204, 204);">
      <p><font color="#3366ff"><i><b>Mean execution time [s]</b></i></font></p>
      </td>
      <td bgcolor="#ffcccc" width="230">
      <p align="CENTER"><font color="#3366ff"><i><b>Comments</b></i></font></p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER"><font color="#009900">fminsimpsa</font></p>
      </td>
      <td width="291">
      <p align="CENTER"><font color="#009900">simplex/simulated
annealing</font></p>
      </td>
      <td width="97">
      <p align="CENTER"><font color="#009900">64.7</font></p>
      </td>
      <td width="104">
      <p>30.7<br>
      </p>
      </td>
      <td width="230">
      <p align="CENTER">&nbsp;<font color="#ff0000">slow</font> </p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER">fminsearchbnd</p>
      </td>
      <td width="291">
      <p align="CENTER">Nelder-Mead simplex</p>
      </td>
      <td width="97">
      <p align="CENTER">33.2</p>
      </td>
      <td width="104">
      <p>1.29<br>
      </p>
      </td>
      <td width="230">
      <p align="CENTER">Matlab default. Only for d&lt;6-8. fast. <br>
      </p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER"><font color="#009900"><b>fminimfil</b></font></p>
      </td>
      <td width="291">
      <p align="CENTER"><font color="#009900"><b>Implicit
filtering<br>
      </b></font></p>
      </td>
      <td width="97">
      <p align="CENTER"><font color="#009900"><b>77.5</b></font></p>
      </td>
      <td width="104">
      <p><font color="#009900"><b>8.0</b></font></p>
      </td>
      <td width="230">
      <p align="CENTER"><span style="color: rgb(0, 153, 0);">fast and
efficient</span>, success &gt; 75 % for <i>d &lt;= 32</i>,
success
&gt; 60%
for <i>d&lt;= 64</i></p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER"><font color="#009900"><b>fminralg</b></font></p>
      </td>
      <td width="291">
      <p align="CENTER"><font color="#009900"><b>Shor r-algorithm</b></font></p>
      </td>
      <td width="97">
      <p align="CENTER"><font color="#009900"><b>61.1</b></font></p>
      </td>
      <td width="104">
      <p><font color="#009900"><b>5.5</b></font></p>
      </td>
      <td width="230">
      <p align="CENTER"><span
 style="color: rgb(0, 153, 0); font-weight: bold;">very fast</span>,
success &gt;63% for <i>2&lt;=d&lt;=40,</i>
success &gt;50% for <i>d&lt;=64</i></p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER">fmincgtrust</p>
      </td>
      <td width="291">
      <p align="CENTER">Steihaug Newton-CG-Trust</p>
      </td>
      <td style="color: rgb(0, 0, 0);" width="97">
      <p align="CENTER">45.2</p>
      </td>
      <td style="color: rgb(0, 0, 0);" width="104">
      <p>6.4</p>
      </td>
      <td width="230">
      <p align="CENTER">&nbsp;</p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER">fmingradrand</p>
      </td>
      <td width="291">
      <p align="CENTER">Random Gradient</p>
      </td>
      <td width="97">
      <p align="CENTER">52.0</p>
      </td>
      <td width="104">
      <p>7.3</p>
      </td>
      <td width="230">
      <p align="CENTER">&nbsp;</p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER">fminlm</p>
      </td>
      <td width="291">
      <p align="CENTER">Levenberg-Maquardt</p>
      </td>
      <td width="97">
      <p align="CENTER">42.2<br>
      </p>
      </td>
      <td width="104">
      <p>30.1<br>
      </p>
      </td>
      <td width="230">
      <p align="CENTER"><span style="color: rgb(0, 153, 0);">Performs
very well when the objective is a vector, e.g. from least-square errors.</span><br>
      </p>
      </td>
    </tr>
    <tr>
      <td style="color: rgb(0, 0, 0);" width="113">
      <p align="CENTER">fminpso</p>
      </td>
      <td style="color: rgb(0, 0, 0);" width="291">
      <p align="CENTER">Particle Swarm
Optimization</p>
      </td>
      <td style="color: rgb(0, 0, 0);" width="97">
      <p align="CENTER">41.7</p>
      </td>
      <td style="color: rgb(0, 0, 0);" width="104">
      <p>9.7</p>
      </td>
      <td style="color: rgb(0, 0, 0);" width="230"> <br>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER"><font color="#009900"><b>fmincmaes</b></font></p>
      </td>
      <td width="291">
      <p align="CENTER"><font color="#009900"><b>Evolution Strategy
with Covariance Matrix Adaptation</b></font></p>
      </td>
      <td width="97">
      <p align="CENTER"><font color="#009900"><b>71.8</b></font></p>
      </td>
      <td width="104">
      <p><font color="#ff0000">12.9</font></p>
      </td>
      <td width="230">
      <p align="CENTER"><br>
      <font color="#ff0000"><span style="color: rgb(0, 153, 0);"></span></font></p>
      </td>
    </tr>
    <tr>
      <td style="color: rgb(0, 153, 0);" width="113">
      <p align="CENTER">fminsce</p>
      </td>
      <td style="color: rgb(0, 153, 0);" width="291">
      <p align="CENTER">Shuffled Complex Evolution</p>
      </td>
      <td width="97">
      <p align="CENTER"><font color="#009900">57.1</font></p>
      </td>
      <td width="104">
      <p>35.2</p>
      </td>
      <td style="color: rgb(255, 0, 0);" width="230">
      <p align="CENTER">slow</p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER"><font color="#009900">fminswarm</font></p>
      </td>
      <td width="291">
      <p align="CENTER"><font color="#009900">Particule Swarm Optimizer</font></p>
      </td>
      <td width="97">
      <p align="CENTER"><font color="#009900">49.2</font></p>
      </td>
      <td width="104">
      <p><font color="#009900">27.2</font></p>
      </td>
      <td style="color: rgb(0, 153, 0);" width="230">
      <p align="CENTER">good for d&lt;6-8<span
 style="color: rgb(0, 0, 0);">, but </span><span
 style="color: rgb(255, 0, 0);">slow</span></p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER">fminga</p>
      </td>
      <td width="291">
      <p align="CENTER">Genetic Algorithm (real coding)</p>
      </td>
      <td width="97">
      <p align="CENTER">42.4</p>
      </td>
      <td width="104">
      <p>24.1<br>
      </p>
      </td>
      <td width="230">
      <p align="CENTER"><font color="#3366ff"><br>
      </font> </p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER">fminswarmhybrid</p>
      </td>
      <td width="291">
      <p align="CENTER">Hybrid Particule Swarm Optimizer</p>
      </td>
      <td width="97">
      <p align="CENTER">54.2<br>
      </p>
      </td>
      <td width="104">
      <p>86.7<br>
      </p>
      </td>
      <td width="230">
      <p align="CENTER">Better than swarm for d&gt;8, but slower</p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER"><font color="#009900"><b>fminhooke</b></font></p>
      </td>
      <td width="291">
      <p align="CENTER"><font color="#009900"><b>Hooke-Jeeves direct
search</b></font></p>
      </td>
      <td width="97">
      <p align="CENTER"><font color="#009900"><b>75.5</b></font></p>
      </td>
      <td width="104">
      <p><font color="#009900"><b>6.7</b></font></p>
      </td>
      <td width="230">
      <p align="CENTER"><span style="color: rgb(0, 153, 0);">Fast and
efficient</span><i></i></p>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER"><font color="#009900"><b>fminpowell</b></font></p>
      </td>
      <td width="291">
      <p align="CENTER"><font color="#009900"><b>Powell Search with
Coggins<br>
      </b></font></p>
      </td>
      <td width="97">
      <p align="CENTER"><font color="#009900"><b>59.4</b></font></p>
      </td>
      <td width="104">
      <p><font color="#009900"><b>0.7</b></font></p>
      </td>
      <td width="230">
      <p align="CENTER"><span style="color: rgb(0, 153, 0);">very fast</span>,
especially
for
d&gt;16<i></i></p>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;">
      <table border="1" cellpadding="1" cellspacing="1">
        <tbody>
          <tr>
          </tr>
          <tr>
            <td width="291">
            <p align="CENTER"><font color="#009900"><span
 style="color: rgb(0, 0, 0);">Powell Search with Golden rule</span><b><br>
            </b></font></p>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td style="vertical-align: top; text-align: center;">62.4<br>
      </td>
      <td style="vertical-align: top;">26.4<br>
      </td>
      <td style="vertical-align: top;">slower than with Coggins<br>
      </td>
    </tr>
    <tr>
      <td width="113">
      <p align="CENTER">fminsimplex<br>
      </p>
      </td>
      <td width="291">
      <p align="CENTER">Nelder-Mead simplex<br>
      </p>
      </td>
      <td width="97">
      <p align="CENTER">30.2<br>
      </p>
      </td>
      <td width="104">
      <p>0.38</p>
      </td>
      <td width="230">
      <p align="CENTER">&nbsp;</p>
      </td>
    </tr>
  </tbody>
</table>
<p style="margin-bottom: 0cm;" align="CENTER"><i>Table 2: Optimization
methods in iFit/iOptim, with mean success ratio in the
dimensionality range d=1-64. Bold values indicate recommended
algorithms. Default parameters from Matlab implementations are used,
and MaxFun=2500*d, MaxIter=250*d, TolFun=1e-4. </i><font
 color="#009900"><i>Best</i></font>
<i>optimizers are highlighted in green.</i></p>
<br>
Some other optimizers such as pure annealing and BFGS, have been
voluntarily put aside as their global efficiency was found too low.<br>
<h3 style="text-align: center;"><a class="mozTocH3"
 name="mozTocId882538"></a>Benchmarking Optimization methods</h3>
Most of the optimizers given with <span style="font-style: italic;">iOptim</span>
have been gathered from the open-source community. In a few cases, the
same mathematical method has been implemented as a number of equivalent
methods, but with different overall efficiency. This means that there
is no unique way to code an optimization algorithm. We do not provide
any guaranty regarding the effectiveness of the optimizers, but we may
statistically compare them.<br>
<br>
<h4><a class="mozTocH4" name="mozTocId69972"></a>Swarm and Genetic
algorithms</h4>
<div style="text-align: center;"><a href="images/gaswarm.png"><span
 style="text-decoration: underline;"><img
 alt="Swarms and Genetic algorithms"
 title="Swarms and Genetic algorithms" src="images/gaswarm.png"
 style="border: 0px solid ; width: 560px; height: 420px;"></span></a><br>
<span style="font-style: italic;">Figure 2: Mean efficiency and solving
time for swarm and genetic algorithm methods, as a function of the
number of parameters to optimize.</span><br>
<br>
</div>
The swarm methods (<span style="font-style: italic;">aka </span>particle
swarm
optimizer)
provide
a
very
good
success
ratio
up to typically 5-10
model parameters. Among these, the covariance matrix adaptation
evolution strategy <span style="font-weight: bold; font-style: italic;">fmincmaes</span>
can
deal with high dimensionalities with more than 50 % success. The
shuffled complex evolution <span
 style="font-weight: bold; font-style: italic;">fminsce</span> is
better for a less than 8 parameters.&nbsp;
<h4><a class="mozTocH4" name="mozTocId409995"></a>Gradient methods
(Newton)</h4>
<div style="text-align: center;"><span
 style="text-decoration: underline;"><a href="images/gradient.png"><img
 alt="Gradient methods" title="Gradient methods"
 src="images/gradient.png"
 style="border: 0px solid ; width: 560px; height: 420px;"></a></span><br>
<span style="font-style: italic;">Figure 3: Mean efficiency and solving
time for gradient methods, as a function of the
number of parameters to optimize.<br>
<br>
</span>
<div style="text-align: center;">
<div style="text-align: left;">The gradient methods (derived from the
Newton's method) are often considered to be the fastest. The well known
Marquardt-Levenberg is an implementation of an adaptive Newton's method
with a least square criteria (see below). This is true - they are fast
for a reduced number of model parameters.
However they often fail, as the method easily gets trapped into local
minima. They are notoriously inefficient with noisy data. The
Maquardt-Levenberg method <span
 style="font-style: italic; font-weight: bold;">fminlm</span>
is designed for objective functions/criteria as vectors. Its efficiency
is then highly improved. However, its memory requirements and execution
time are significantly higher than other methods.<br>
<br>
</div>
<div style="text-align: left;">Among these methods, we provide two
excellent optimizers, the Implicit Filtering <span
 style="font-style: italic; font-weight: bold;">fminimfil</span> and
the Shor R-algorithm <span
 style="font-style: italic; font-weight: bold;">fminralg</span> which
are both fast and ensure a success ratio higher than 60 % for all type
of problems, including noisy ones. The latter is slightly less
efficient, but much faster.<span style="font-style: italic;"></span><br>
</div>
<span style="font-style: italic;"></span>
<div style="text-align: left;"><br>
<h4><a class="mozTocH3" name="mozTocId184231"></a>Other optimizers (and
simplex)<br>
</h4>
&nbsp;<br>
</div>
</div>
</div>
<div style="text-align: center;"><a href="images/other.png"><img
 alt="iOptim: Other methods" title="iOptim: Other methods"
 src="images/other.png"
 style="border: 0px solid ; width: 580px; height: 443px;"></a><br>
<span style="font-style: italic;">Figure 4: Mean efficiency and solving
time for other non-conventional methods, as a function of the
number of parameters to optimize.<br>
<br>
</span>
<div style="text-align: left;">The Hooke optimizer <span
 style="font-style: italic; font-weight: bold;">fminhooke</span> is one
of the most efficient methods for all problem dimensionalities, with at
least 60% efficiency, and among the fastest solving time.<br>
The Powell optimizer <span
 style="font-style: italic; font-weight: bold;">fminpowell</span> is a
well known, simple and efficient method. It ensures at least 50 %
success for most problems. Its version with the Coggins line search is
the fastest of all the optmizers proposed here. The use of the Golden
rule line search slightly improves its efficiency, but dramatically
increases the execution time.<br>
<br>
The default optimizer shipped with
Matlab is the <span style="font-style: italic;">fminsearch</span> one,
which
is a pure simplex implementation, extremely fast. We do not recommend
this method as all others are better in efficiency, some being as fast.
A better alternative is a mix of a simplex with a simulated annealing
process, implemented as <span
 style="font-style: italic; font-weight: bold;">fminsimpsa. </span>It
can solve problems with up to 30 parameters, but is as slow as the
Powell/Golden rule.<br>
<h3 style="text-align: center;"><a class="mozTocH3" name="mozTocId95530"></a>Model
parameter
constraints</h3>
In many cases, the model parameters are to be constrained. This
includes some fixed values, or bounds within which parameters should be
restricted. This is speficied to the optimizer method by mean of a 4th
input
argument <span style="color: rgb(255, 0, 0); font-style: italic;">constraints</span>
:<br>
<pre style="margin-left: 40px;">&gt;&gt; <span
 style="font-style: italic;"></span>[parameters,criteria,message,output]= <span
 style="color: rgb(51, 102, 255);">fminimfil</span>(<span
 style="color: rgb(204, 51, 204);">model, </span>initial_parameters, options, <span
 style="color: rgb(204, 51, 204);"><span style="color: rgb(255, 0, 0);">constraints</span></span><span
 style="color: rgb(0, 0, 0);">)<br></span></pre>
<pre style="margin-left: 40px;"><span style="color: rgb(0, 0, 0);"></span><span
 style="color: rgb(0, 0, 0);"></span></pre>
<h4><a class="mozTocH4" name="mozTocId267246"></a>Fixed parameters</h4>
To fix some of the model parameters to their starting value, you just
need to define <span style="font-style: italic;">constraints</span> as
a vector with 0 for free parameters, and 1 for fixed parameters, e.g. :<br>
<pre style="margin-left: 40px;">&gt;&gt; p=<span
 style="color: rgb(51, 102, 255);">fminimfil</span>(objective<span
 style="color: rgb(204, 51, 204);"></span>, starting, <span
 style="color: rgb(204, 51, 204);">options</span>, [ <span
 style="color: rgb(255, 0, 0);">1</span> 0 0 0 ])<br><br></pre>
will fix the first model paramete. A similar behavior is obtained when
setting constraints as a structure
with a <span style="font-style: italic;">fixed</span> member :<br>
<pre style="margin-left: 40px;">&gt;&gt; constraints.fixed = [ <span
 style="color: rgb(255, 0, 0);">1</span> 0 0 0 ];<br></pre>
The <span style="font-style: italic;">constraints</span> vector should
have the same length as the model parameter vector.<br>
<h4><a class="mozTocH4" name="mozTocId871054"></a>Parameters varying
within limits</h4>
If one needs to restrict the exploration range of parameters, it is
possible to define the lower and upper bounds of the model parameters.
This can be done by setting the 4th argument to the lower bounds<span
 style="font-style: italic;"> lb</span>, and the 5th to the upper <span
 style="font-style: italic;">ub</span>, e.g. :<br>
<pre style="margin-left: 40px;">&gt;&gt; p=<span
 style="color: rgb(51, 102, 255);">fminimfil</span>(objective<span
 style="color: rgb(204, 51, 204);"></span>, starting, <span
 style="color: rgb(204, 51, 204);">options</span>, <span
 style="color: rgb(255, 0, 0);">[ 0.5 0.8 0 0 ], [ 1 1.2 1 1 ]</span>)</pre>
A similar behavior is obtained by setting constraints as a structure
with members <span style="font-style: italic;">min</span> and <span
 style="font-style: italic;">max</span> :<br>
<pre style="margin-left: 40px;">&gt;&gt; constraints.min = <span
 style="color: rgb(255, 0, 0);">[ 0.5 0.8 0 0 ]</span>;<br>&gt;&gt; constraints.max = <span
 style="color: rgb(255, 0, 0);">[ 1 1.2 1 1 ]</span>;<br></pre>
The <span style="font-style: italic;">constraints</span> vectors
should have the same length as the model parameter vector.<br>
<span style="font-style: italic;"></span>
<h4><a class="mozTocH4" name="mozTocId673530"></a>Limiting parameter
change<br>
</h4>
Last, it is possible to restrict the change rate of parameters by
assigning the <span style="font-style: italic;">constraints.steps</span>
field to a vector. Each non-zero value then specifies the absolute
change that the corresponding parameter can vary between two optimizer
iterations.<br>
<br>
In short, the constraints structure can have the following members,
which all should have the same length as the model parameter vector:<br>
<ul>
  <li><span style="font-style: italic;">constraints.fixed: </span>1
for fixed parameter, 0 for free parameters<br>
  </li>
  <li><span style="font-style: italic;">constraints.min: </span>the
minimum value for each parameter. -Inf is supported.<br>
  </li>
  <li><span style="font-style: italic;">constraints.max: </span>the
maximum value for each parameter. +Inf is supported.</li>
  <li><span style="font-style: italic;">constraints.steps: </span>the
maximum change between iterations for each parameter. +Inf is supported.</li>
</ul>
All these constraints may be used simultaneously.<br>
<br>
</div>
</div>
<br>
<hr style="width: 100%; height: 2px;">
<div style="text-align: center;">
<div style="text-align: center;"><span style="font-style: italic;">E.
Farhi - iFit/optimization methods - </span><span
 style="font-style: italic;">$Date: 2010-12-27 21:48:34 $ $Revision:
1.2 $</span><span style="font-style: italic;"> </span>- back to <a
 href="index.html">Main iFit Page</a>
</div>
</div>
</body>
</html>
